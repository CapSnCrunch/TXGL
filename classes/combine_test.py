import numpy as np

pi = np.pi

# sectors = [[0.1326, 0.2097],
#            [0.3584, 0.5481],
#            [0.5883, 0.6721],
#            [0.6897, 2.2968],
#            [2.2973, 2.2977],
#            [2.3006, 2.4000],
#            [2.4049, 2.6835],
#            [2.9457, 0.0949],
#            [2.9468, 2.9944],
#            [3.0931, 0.0498]]

sectors = [
[0.5573481720496015, 0.576666814057157],
[0.5806155222882063, 0.6586701942564501],
[0.6595841432450794, 0.6868175080668435],
[0.6919917157781422, 0.7678761811065403],
[0.7687848313784297, 0.7900296043717595],
[0.7918082960613884, 1.1983025571565395],
[1.229058303971912, 1.2460694347581072],
[1.2725514199966206, 1.272951419996621],
[1.2732269505332792, 1.2835076103691052],
[1.3001788383999302, 1.3175311020040053],
[1.374252534477345, 1.392051609655709],
[1.414103254820032, 1.424416899888079],
[1.430119738106338, 1.430519738106338],
[1.437088515374829, 1.455332723964005],
[1.782662323215955, 1.8610608646637323],
[2.233495460557151, 2.456321825773566],
[2.503135589959363, 2.5379580159792736],
[2.6416453946531133, 2.68777997601011],
[2.7623313154097033, 2.791139197951426],
[2.8122743872158735, 2.861150074739169],
[2.872121284129184, 2.889582440959431],
[2.902847687094295, 2.9504135017185904],
[2.976081690294889, 2.9933142382274984],
[3.006692628324803, 3.007092628324803],
[3.0096269102162805, 3.051899459334485],
[3.059410252282619, 0.561769742590899]]

print(len(sectors))

out = [];
(start, end) = sectors.pop(0)
for s in sectors:
    if s[0] > s[1]:
        s[1] += pi
    if s[0] <= end:
        if s[1] > end:
            end = s[1]
    else:
        out.append([start, end])
        [start, end] = s

if end > pi:
    while out:
        s = out[0]
        if s[0] + pi <= end:
            out.pop(0)
            s_end = s[1] + pi
            if s_end > end:
                end = s_end
                break
        else:
            break

if end >= start + pi:
    out = [[0, pi]]
else:
    out.append([start, end])

for s in out:
    s[1] = s[1] % np.pi

print("merged sectors: ", out)

print(len(sectors))